{"ast":null,"code":"var _jsxFileName = \"/Users/vivekkumarsingh/Desktop/Chikitsak/Chikitsak/frontend/src/views/Messages.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Row } from \"shards-react\";\nimport Sidebar from \"../components/messages/Sidebar\";\nimport Chat from \"../components/messages/Chat\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport \"../components/messages/Messages.css\";\nimport Pusher from 'pusher-js';\nimport axios from \"../axios\";\n\nconst Messages = () => {\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    axios.get('/messages/sync').then(response => {\n      setMessages(response.data);\n    });\n  }, []);\n  useEffect(() => {\n    const pusher = new Pusher('b985966bbe3d82cec18d', {\n      cluster: 'ap2'\n    });\n    const channel = pusher.subscribe('messages');\n    channel.bind('inserted', newMessage => {\n      setMessages([...messages, newMessage]);\n    });\n    return () => {\n      channel.unbind_all();\n      channel.unsubscribe();\n    };\n  }, [messages]);\n  console.log(messages);\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"main-content-container px-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    noGutters: true,\n    className: \"page-header py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    sm: \"4\",\n    title: \"My Patients\",\n    subtitle: \"Threads\",\n    className: \"text-sm-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Chat, {\n    messages: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default Messages;","map":{"version":3,"sources":["/Users/vivekkumarsingh/Desktop/Chikitsak/Chikitsak/frontend/src/views/Messages.js"],"names":["React","useEffect","useState","Container","Row","Sidebar","Chat","PageTitle","Pusher","axios","Messages","messages","setMessages","get","then","response","data","pusher","cluster","channel","subscribe","bind","newMessage","unbind_all","unsubscribe","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAAQC,SAAR,EAAmBC,GAAnB,QAA6B,cAA7B;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAO,qCAAP;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB;;AAGA,MAAMC,QAAQ,GAAG,MACjB;AAEE,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,KAAK,CAACI,GAAN,CAAU,gBAAV,EACCC,IADD,CACMC,QAAQ,IAAI;AAChBH,MAAAA,WAAW,CAACG,QAAQ,CAACC,IAAV,CAAX;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;AAQAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,MAAM,GAAG,IAAIT,MAAJ,CAAW,sBAAX,EAAmC;AAChDU,MAAAA,OAAO,EAAE;AADuC,KAAnC,CAAf;AAIA,UAAMC,OAAO,GAAGF,MAAM,CAACG,SAAP,CAAiB,UAAjB,CAAhB;AACED,IAAAA,OAAO,CAACE,IAAR,CAAa,UAAb,EAA0BC,UAAD,IAAgB;AACvCV,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcW,UAAd,CAAD,CAAX;AACD,KAFD;AAIA,WAAO,MAAM;AACXH,MAAAA,OAAO,CAACI,UAAR;AACAJ,MAAAA,OAAO,CAACK,WAAR;AACD,KAHD;AAID,GAdM,EAcJ,CAACb,QAAD,CAdI,CAAT;AAgBEc,EAAAA,OAAO,CAACC,GAAR,CAAYf,QAAZ;AAEJ,sBACE,oBAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAiB,IAAA,SAAS,EAAC,6BAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,SAAS,MAAd;AAAe,IAAA,SAAS,EAAC,kBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,EAAE,EAAC,GAAd;AAAkB,IAAA,KAAK,EAAC,aAAxB;AAAsC,IAAA,QAAQ,EAAC,SAA/C;AAAyD,IAAA,SAAS,EAAC,cAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAME;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEA,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,CANF,CADF;AAgBE,CA/CF;;AAiDA,eAAeD,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {Container, Row} from \"shards-react\";\nimport Sidebar from \"../components/messages/Sidebar\";\nimport Chat from \"../components/messages/Chat\";\nimport PageTitle from \"../components/common/PageTitle\";\nimport \"../components/messages/Messages.css\";\nimport Pusher from 'pusher-js';\nimport axios from \"../axios\";\n\n\nconst Messages = () => \n{\n\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    axios.get('/messages/sync')\n    .then(response => {\n      setMessages(response.data);\n    })\n  }, [])\n\n\n  useEffect(() => {\n    const pusher = new Pusher('b985966bbe3d82cec18d', {\n      cluster: 'ap2'\n    });\n  \n    const channel = pusher.subscribe('messages');\n      channel.bind('inserted', (newMessage) => {\n        setMessages([...messages, newMessage] )\n      });\n\n      return () => {\n        channel.unbind_all();\n        channel.unsubscribe();\n      };\n    }, [messages]);\n    \n    console.log(messages);\n\nreturn (\n  <Container fluid className=\"main-content-container px-4\">\n    <Row noGutters className=\"page-header py-4\">\n      <PageTitle sm=\"4\" title=\"My Patients\" subtitle=\"Threads\" className=\"text-sm-left\" />\n    </Row>\n    \n    {/* Chat UI */}\n    <div className=\"app\">\n        <div className=\"app__body\">\n            <Sidebar/>\n            <Chat messages={messages}/>\n        </div>\n    </div>\n\n    \n  </Container>\n)};\n\nexport default Messages;\n"]},"metadata":{},"sourceType":"module"}